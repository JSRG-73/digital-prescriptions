<html>

<head>
    <link rel="stylesheet" href="styles.css">
    </link>
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i|Playfair+Display:400,400i,500,500i,600,600i,700,700i&amp;subset=cyrillic"
        rel="stylesheet">
    </link>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&amp;display=swap" rel="stylesheet">
    </link>

</head>

<body>
    <header>
        <div class="left"><img src="UC_logo.png" alt="" id="logo"></div>

        <div class="center">
            <h1>Dr. Eduardo Barragán Curiel</h1>
            <p>GINECOLOGO ONCOLOGO <br>Universidad de Guadalajara <br> Nuevo Hospital Civil de Guadalajara <br>
                Instituto Nacional de Cancerología</p>
        </div>

        <div class="right">
            <div class="middle">
                <h4>Nombre: <div class="black">{{patient}}</div>
                </h4><br>
                <h4>Fecha: <div class="black">{{date}}</div>
                </h4>
            </div>

        </div>

    </header>

    <main class="content" id="content">
        {{description}}
    </main>

    <!--<div class="controls">
        <input type="range" id="heightSlider" min="0" max="1000" value="400">
        <span id="heightValue">400px</span>
        <button onclick="getVisibleText()">Get Visible Text</button>
    </div>-->

    <footer>
        <div class="bottomleft"><p id="MOCTEZUMA">MOCTEZUMA No.187 CD DEL SOL <br> ZAPOPAN JALISCO <br> TEL. 33 3647-3034, 3331228255, 33 3122-1167</p></div>
        <div class="bottomright"><img src="transparente.png" alt="" id="transparente"></div>
    </footer>

    <script>
        document.addEventListener('click', (event) => {
            console.log('Page Position - X:', event.pageX);
            console.log('Page Position - Y:', event.pageY);
        });


        const contentDiv = document.getElementById('content');
        const heightSlider = 400;
        const heightValue = document.getElementById('heightValue');
        const charCountSpan = document.getElementById('charCount');
        const visibleTextDiv = document.getElementById('visibleText');

        heightSlider.addEventListener('input', () => {
            heightValue.textContent = `${heightSlider.value}px`;
        });

        function getVisibleText() {
            const targetHeight = parseInt(heightSlider.value);
            const result = getVisibleRange(contentDiv, targetHeight);

            console.log("valor: ", heightSlider);

            console.log("contador: ",result.count);
            console.log("testo: ",result.text);
        }

        function getVisibleRange(element, maxHeight) {
            const textNode = element.firstChild;
            if (!textNode || textNode.nodeType !== Node.TEXT_NODE) {
                return { count: 0, text: '' };
            }

            const elementTop = element.getBoundingClientRect().top;
            const cutoffY = elementTop + maxHeight;
            let count = 0;
            let lastVisibleIndex = 0;
            const text = textNode.nodeValue;

            for (let i = 0; i < text.length; i++) {
                const range = document.createRange();
                range.setStart(textNode, i);
                range.setEnd(textNode, i + 1);

                const rect = range.getBoundingClientRect();
                if (rect.bottom > cutoffY) break;

                count++;
                lastVisibleIndex = i + 1; // +1 because substring is end-exclusive
            }

            return {
                count: count,
                text: text.substring(0, lastVisibleIndex)
            };
        }

        // Initial calculation
        getVisibleText();
    </script>
</body>

</html>